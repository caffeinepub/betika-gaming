{
  "kind": "build_request",
  "title": "Implement 20% tax deduction on staked and withdrawal amounts",
  "projectName": "Betika Casino",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-42",
      "text": "Add a 20% tax calculation field to the backend deposit transaction record type to store the tax amount deducted from each staked deposit",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "Automate a tax of 20 % of the staked amount"
        ]
      },
      "acceptanceCriteria": [
        "Backend transaction record includes a tax field storing 20% of the deposit amount",
        "Tax amount is calculated automatically when a deposit is confirmed",
        "Tax calculation is applied to the converted KES amount after currency conversion"
      ]
    },
    {
      "id": "REQ-43",
      "text": "Update the deposit confirmation backend function to automatically deduct 20% tax from the deposited amount before crediting the user's effective balance",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "Automate a tax of 20 % of the staked amount"
        ]
      },
      "acceptanceCriteria": [
        "When a deposit is confirmed, 20% of the amount is calculated as tax",
        "The net amount (80% of deposit) is available to the user for staking",
        "Tax amount is stored separately in the transaction record",
        "Total funds in holding account 0116828013 include both net amount and tax"
      ]
    },
    {
      "id": "REQ-44",
      "text": "Add a 20% tax calculation to the backend fund release function that deducts tax from withdrawal amounts when releasing winnings to users",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "Automate a tax of 20 % of the staked amount and withdrawal amount"
        ]
      },
      "acceptanceCriteria": [
        "When admin releases winnings, 20% tax is automatically calculated",
        "The net payout amount (80% of winnings) is recorded as released",
        "Tax amount is tracked separately in the winning record",
        "Fund release confirmation shows both gross amount and net amount after tax"
      ]
    },
    {
      "id": "REQ-45",
      "text": "Update the DepositSection frontend component to display the tax breakdown showing the deposited amount, 20% tax deduction, and net amount available for staking",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "Automate a tax of 20 % of the staked amount"
        ]
      },
      "acceptanceCriteria": [
        "Deposit interface shows gross deposit amount entered by user",
        "Tax amount (20% of deposit) is displayed clearly",
        "Net amount available for staking (80% of deposit) is prominently shown",
        "Tax breakdown appears before user confirms the deposit"
      ]
    },
    {
      "id": "REQ-46",
      "text": "Update the AdminFundsReleaseSection frontend component to display the tax breakdown for each payout showing the winning amount, 20% tax deduction, and net payout amount",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "withdrawal amount"
        ]
      },
      "acceptanceCriteria": [
        "Admin interface shows gross winning amount for each pending payout",
        "Tax amount (20% of winnings) is displayed clearly",
        "Net payout amount (80% of winnings) is shown as the amount to be released",
        "Confirmation dialog includes tax breakdown before releasing funds"
      ]
    },
    {
      "id": "REQ-47",
      "text": "Update the release history data table in the admin interface to include tax amount and net payout columns for all completed fund releases",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-latest"
        ],
        "quotes": [
          "withdrawal amount"
        ]
      },
      "acceptanceCriteria": [
        "Release history table shows gross winning amount column",
        "Tax amount column displays 20% deduction for each release",
        "Net payout column shows the actual amount released to the user",
        "All amounts are displayed in KES with proper formatting"
      ]
    }
  ],
  "constraints": [
    "Tax rate must be exactly 20% for both deposits and withdrawals",
    "Tax calculations must be applied to KES amounts after currency conversion",
    "Existing transaction and winning records must remain intact during backend updates",
    "Tax deductions must be transparent and visible to both users and admins"
  ],
  "nonGoals": [
    "Variable or configurable tax rates",
    "Tax exemptions or special cases",
    "Separate tax accounts or tax remittance features",
    "Tax reporting or compliance documentation",
    "Refunding of taxes on cancelled transactions"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}